From 8598715564c7c8d7b7ed75e98bd57cc44b16b318 Mon Sep 17 00:00:00 2001
From: William Douglas <william.douglas@intel.com>
Date: Fri, 20 Apr 2012 14:20:14 -0700
Subject: [PATCH 1/3] add tmp.mount to mount /tmp as tmpfs

---
 Makefile.am           |    7 +++++++
 units/tizen/tmp.mount |   10 ++++++++++
 2 files changed, 17 insertions(+)
 create mode 100644 units/tizen/tmp.mount

diff --git a/Makefile.am b/Makefile.am
index 9762da1..d24649e 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -380,6 +380,11 @@ systemgenerator_PROGRAMS += \
 	systemd-rc-local-generator
 endif
 
+if TARGET_MEEGO
+dist_systemunit_DATA += \
+	units/tizen/tmp.mount
+endif
+
 if TARGET_MANDRIVA
 dist_systemunit_DATA += \
 	units/mandriva/prefdm.service \
@@ -2433,6 +2438,8 @@ if TARGET_MEEGO
 		rm -f * )
 	( cd $(DESTDIR)$(pkgsysconfdir)/system/local-fs.target.wants && \
 		rm -f * )
+	( cd $(DESTDIR)$(systemunitdir)/local-fs.target.wants && \
+		$(LN_S) $(systemunitdir)/tmp.mount tmp.mount )
 	( cd $(DESTDIR)$(pkgsysconfdir)/system/multi-user.target.wants && \
 		rm -f * )
 	( cd $(DESTDIR)$(pkgsysconfdir)/system/getty.target.wants && \
diff --git a/units/tizen/tmp.mount b/units/tizen/tmp.mount
new file mode 100644
index 0000000..7c3e98c
--- /dev/null
+++ b/units/tizen/tmp.mount
@@ -0,0 +1,10 @@
+
+[Unit]
+Description=Runtime Directory
+Before=local-fs.target
+
+[Mount]
+What=tmpfs
+Where=/tmp
+Type=tmpfs
+Options=relatime,nodev,nosuid,noexec,size=128M,smackfsroot=*
-- 
1.7.10

